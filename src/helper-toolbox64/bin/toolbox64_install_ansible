#!/usr/bin/env bash

# shellcheck disable=SC1091
source "/toolbox64.env" || exit $?
# shellcheck source=SCRIPTDIR/../../loader/bashlib64.bash disable=SC2154
source "${TOOLBOX64_LIB}/bashlib64.bash" || exit $?

#
# Functions
#

function tb64_ans_provision() {
  local packages='ansible'

  # shellcheck disable=SC2086
  bl64_py_pip_usr_deploy $packages
}

#
# Main
#

declare process='Install Ansible'
declare -i status=0

bl64_os_match "$BL64_OS_OL" &&
  bl64_check_privilege_root &&
  bl64_py_setup ||
  exit $?

bl64_msg_all_enable_verbose
bl64_msg_show_batch_start "$process"

tb64_ans_provision
status=$?

bl64_fs_cleanup_full

bl64_msg_show_batch_finish "$status" "$process"
exit $status
